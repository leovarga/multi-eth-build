(function(){var d=d||{};d.scope={};d.arrayIteratorImpl=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};d.arrayIterator=function(a){return{next:d.arrayIteratorImpl(a)}};d.makeIterator=function(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):d.arrayIterator(a)};d.ASSUME_ES5=!1;d.ASSUME_NO_NATIVE_MAP=!1;d.ASSUME_NO_NATIVE_SET=!1;
d.objectCreate=d.ASSUME_ES5||"function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b};d.underscoreProtoCanBeSet=function(){var a={a:!0},b={};try{return b.__proto__=a,b.a}catch(c){}return!1};d.setPrototypeOf="function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:d.underscoreProtoCanBeSet()?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null;
d.inherits=function(a,b){a.prototype=d.objectCreate(b.prototype);a.prototype.constructor=a;if(d.setPrototypeOf)(0,d.setPrototypeOf)(a,b);else for(var c in b)if("prototype"!=c)if(Object.defineProperties){var e=Object.getOwnPropertyDescriptor(b,c);e&&Object.defineProperty(a,c,e)}else a[c]=b[c];a.superClass_=b.prototype};d.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};d.global=d.getGlobal(this);
d.defineProperty=d.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};d.polyfill=function(a,b){if(b){var c=d.global;a=a.split(".");for(var e=0;e<a.length-1;e++){var g=a[e];g in c||(c[g]={});c=c[g]}a=a[a.length-1];e=c[a];b=b(e);b!=e&&null!=b&&d.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};d.FORCE_POLYFILL_PROMISE=!1;
d.polyfill("Promise",function(a){function b(a){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var b=this.createResolveAndReject_();try{a(b.resolve,b.reject)}catch(r){b.reject(r)}}function c(){this.batch_=null}function e(a){return a instanceof b?a:new b(function(b){b(a)})}if(a&&!d.FORCE_POLYFILL_PROMISE)return a;c.prototype.asyncExecute=function(a){null==this.batch_&&(this.batch_=[],this.asyncExecuteBatch_());this.batch_.push(a);return this};c.prototype.asyncExecuteBatch_=function(){var a=
this;this.asyncExecuteFunction(function(){a.executeBatch_()})};var g=d.global.setTimeout;c.prototype.asyncExecuteFunction=function(a){g(a,0)};c.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var a=this.batch_;this.batch_=[];for(var b=0;b<a.length;++b){var c=a[b];a[b]=null;try{c()}catch(p){this.asyncThrow_(p)}}}this.batch_=null};c.prototype.asyncThrow_=function(a){this.asyncExecuteFunction(function(){throw a;})};b.prototype.createResolveAndReject_=function(){function a(a){return function(e){c||
(c=!0,a.call(b,e))}}var b=this,c=!1;return{resolve:a(this.resolveTo_),reject:a(this.reject_)}};b.prototype.resolveTo_=function(a){if(a===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(a instanceof b)this.settleSameAsPromise_(a);else{a:switch(typeof a){case "object":var c=null!=a;break a;case "function":c=!0;break a;default:c=!1}c?this.resolveToNonPromiseObj_(a):this.fulfill_(a)}};b.prototype.resolveToNonPromiseObj_=function(a){var b=void 0;try{b=a.then}catch(r){this.reject_(r);
return}"function"==typeof b?this.settleSameAsThenable_(b,a):this.fulfill_(a)};b.prototype.reject_=function(a){this.settle_(2,a)};b.prototype.fulfill_=function(a){this.settle_(1,a)};b.prototype.settle_=function(a,b){if(0!=this.state_)throw Error("Cannot settle("+a+", "+b+"): Promise already settled in state"+this.state_);this.state_=a;this.result_=b;this.executeOnSettledCallbacks_()};b.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var a=0;a<this.onSettledCallbacks_.length;++a)f.asyncExecute(this.onSettledCallbacks_[a]);
this.onSettledCallbacks_=null}};var f=new c;b.prototype.settleSameAsPromise_=function(a){var b=this.createResolveAndReject_();a.callWhenSettled_(b.resolve,b.reject)};b.prototype.settleSameAsThenable_=function(a,b){var c=this.createResolveAndReject_();try{a.call(b,c.resolve,c.reject)}catch(p){c.reject(p)}};b.prototype.then=function(a,c){function e(a,b){return"function"==typeof a?function(b){try{g(a(b))}catch(x){f(x)}}:b}var g,f,k=new b(function(a,b){g=a;f=b});this.callWhenSettled_(e(a,g),e(c,f));return k};
b.prototype.catch=function(a){return this.then(void 0,a)};b.prototype.callWhenSettled_=function(a,b){function c(){switch(e.state_){case 1:a(e.result_);break;case 2:b(e.result_);break;default:throw Error("Unexpected state: "+e.state_);}}var e=this;null==this.onSettledCallbacks_?f.asyncExecute(c):this.onSettledCallbacks_.push(c)};b.resolve=e;b.reject=function(a){return new b(function(b,c){c(a)})};b.race=function(a){return new b(function(b,c){for(var g=d.makeIterator(a),f=g.next();!f.done;f=g.next())e(f.value).callWhenSettled_(b,
c)})};b.all=function(a){var c=d.makeIterator(a),g=c.next();return g.done?e([]):new b(function(a,b){function f(b){return function(c){k[b]=c;m--;0==m&&a(k)}}var k=[],m=0;do k.push(void 0),m++,e(g.value).callWhenSettled_(f(k.length-1),b),g=c.next();while(!g.done)})};return b},"es6","es3");d.SYMBOL_PREFIX="jscomp_symbol_";d.initSymbol=function(){d.initSymbol=function(){};d.global.Symbol||(d.global.Symbol=d.Symbol)};d.Symbol=function(){var a=0;return function(b){return d.SYMBOL_PREFIX+(b||"")+a++}}();
d.initSymbolIterator=function(){d.initSymbol();var a=d.global.Symbol.iterator;a||(a=d.global.Symbol.iterator=d.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&d.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return d.iteratorPrototype(d.arrayIteratorImpl(this))}});d.initSymbolIterator=function(){}};
d.initSymbolAsyncIterator=function(){d.initSymbol();var a=d.global.Symbol.asyncIterator;a||(a=d.global.Symbol.asyncIterator=d.global.Symbol("asyncIterator"));d.initSymbolAsyncIterator=function(){}};d.iteratorPrototype=function(a){d.initSymbolIterator();a={next:a};a[d.global.Symbol.iterator]=function(){return this};return a};d.generator={};d.generator.ensureIteratorResultIsObject_=function(a){if(!(a instanceof Object))throw new TypeError("Iterator result "+a+" is not an object");};
d.generator.Context=function(){this.isRunning_=!1;this.yieldAllIterator_=null;this.yieldResult=void 0;this.nextAddress=1;this.finallyAddress_=this.catchAddress_=0;this.finallyContexts_=this.abruptCompletion_=null};d.generator.Context.prototype.start_=function(){if(this.isRunning_)throw new TypeError("Generator is already running");this.isRunning_=!0};d.generator.Context.prototype.stop_=function(){this.isRunning_=!1};
d.generator.Context.prototype.jumpToErrorHandler_=function(){this.nextAddress=this.catchAddress_||this.finallyAddress_};d.generator.Context.prototype.next_=function(a){this.yieldResult=a};d.generator.Context.prototype.throw_=function(a){this.abruptCompletion_={exception:a,isException:!0};this.jumpToErrorHandler_()};d.generator.Context.prototype.return=function(a){this.abruptCompletion_={return:a};this.nextAddress=this.finallyAddress_};
d.generator.Context.prototype.jumpThroughFinallyBlocks=function(a){this.abruptCompletion_={jumpTo:a};this.nextAddress=this.finallyAddress_};d.generator.Context.prototype.yield=function(a,b){this.nextAddress=b;return{value:a}};d.generator.Context.prototype.yieldAll=function(a,b){a=d.makeIterator(a);var c=a.next();d.generator.ensureIteratorResultIsObject_(c);if(c.done)this.yieldResult=c.value,this.nextAddress=b;else return this.yieldAllIterator_=a,this.yield(c.value,b)};
d.generator.Context.prototype.jumpTo=function(a){this.nextAddress=a};d.generator.Context.prototype.jumpToEnd=function(){this.nextAddress=0};d.generator.Context.prototype.setCatchFinallyBlocks=function(a,b){this.catchAddress_=a;void 0!=b&&(this.finallyAddress_=b)};d.generator.Context.prototype.setFinallyBlock=function(a){this.catchAddress_=0;this.finallyAddress_=a||0};d.generator.Context.prototype.leaveTryBlock=function(a,b){this.nextAddress=a;this.catchAddress_=b||0};
d.generator.Context.prototype.enterCatchBlock=function(a){this.catchAddress_=a||0;a=this.abruptCompletion_.exception;this.abruptCompletion_=null;return a};d.generator.Context.prototype.enterFinallyBlock=function(a,b,c){c?this.finallyContexts_[c]=this.abruptCompletion_:this.finallyContexts_=[this.abruptCompletion_];this.catchAddress_=a||0;this.finallyAddress_=b||0};
d.generator.Context.prototype.leaveFinallyBlock=function(a,b){b=this.finallyContexts_.splice(b||0)[0];if(b=this.abruptCompletion_=this.abruptCompletion_||b){if(b.isException)return this.jumpToErrorHandler_();void 0!=b.jumpTo&&this.finallyAddress_<b.jumpTo?(this.nextAddress=b.jumpTo,this.abruptCompletion_=null):this.nextAddress=this.finallyAddress_}else this.nextAddress=a};d.generator.Context.prototype.forIn=function(a){return new d.generator.Context.PropertyIterator(a)};
d.generator.Context.PropertyIterator=function(a){this.object_=a;this.properties_=[];for(var b in a)this.properties_.push(b);this.properties_.reverse()};d.generator.Context.PropertyIterator.prototype.getNext=function(){for(;0<this.properties_.length;){var a=this.properties_.pop();if(a in this.object_)return a}return null};d.generator.Engine_=function(a){this.context_=new d.generator.Context;this.program_=a};
d.generator.Engine_.prototype.next_=function(a){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_.next,a,this.context_.next_);this.context_.next_(a);return this.nextStep_()};d.generator.Engine_.prototype.return_=function(a){this.context_.start_();var b=this.context_.yieldAllIterator_;if(b)return this.yieldAllStep_("return"in b?b["return"]:function(a){return{value:a,done:!0}},a,this.context_.return);this.context_.return(a);return this.nextStep_()};
d.generator.Engine_.prototype.throw_=function(a){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_["throw"],a,this.context_.next_);this.context_.throw_(a);return this.nextStep_()};
d.generator.Engine_.prototype.yieldAllStep_=function(a,b,c){try{var e=a.call(this.context_.yieldAllIterator_,b);d.generator.ensureIteratorResultIsObject_(e);if(!e.done)return this.context_.stop_(),e;var g=e.value}catch(f){return this.context_.yieldAllIterator_=null,this.context_.throw_(f),this.nextStep_()}this.context_.yieldAllIterator_=null;c.call(this.context_,g);return this.nextStep_()};
d.generator.Engine_.prototype.nextStep_=function(){for(;this.context_.nextAddress;)try{var a=this.program_(this.context_);if(a)return this.context_.stop_(),{value:a.value,done:!1}}catch(b){this.context_.yieldResult=void 0,this.context_.throw_(b)}this.context_.stop_();if(this.context_.abruptCompletion_){a=this.context_.abruptCompletion_;this.context_.abruptCompletion_=null;if(a.isException)throw a.exception;return{value:a.return,done:!0}}return{value:void 0,done:!0}};
d.generator.Generator_=function(a){this.next=function(b){return a.next_(b)};this.throw=function(b){return a.throw_(b)};this.return=function(b){return a.return_(b)};d.initSymbolIterator();this[Symbol.iterator]=function(){return this}};d.generator.createGenerator=function(a,b){b=new d.generator.Generator_(new d.generator.Engine_(b));d.setPrototypeOf&&d.setPrototypeOf(b,a.prototype);return b};
d.asyncExecutePromiseGenerator=function(a){function b(b){return a.next(b)}function c(b){return a.throw(b)}return new Promise(function(e,g){function f(a){a.done?e(a.value):Promise.resolve(a.value).then(b,c).then(f,g)}f(a.next())})};d.asyncExecutePromiseGeneratorFunction=function(a){return d.asyncExecutePromiseGenerator(a())};d.asyncExecutePromiseGeneratorProgram=function(a){return d.asyncExecutePromiseGenerator(new d.generator.Generator_(new d.generator.Engine_(a)))};
d.findInternal=function(a,b,c){a instanceof String&&(a=String(a));for(var e=a.length,g=0;g<e;g++){var f=a[g];if(b.call(c,f,g,a))return{i:g,v:f}}return{i:-1,v:void 0}};d.polyfill("Array.prototype.find",function(a){return a?a:function(a,c){return d.findInternal(this,a,c).v}},"es6","es3");function h(){this.subscribers={}}h.prototype.subscribe=function(a,b){var c=this.subscribers[a];c||(c=this.subscribers[a]=[]);c.push(b)};
h.prototype.fire=function(a){console.log("Fired event "+a,arguments);for(var b=d.makeIterator([this.subscribers[a]||[],this.subscribers[""]||[]]),c=b.next();!c.done;c=b.next()){c=d.makeIterator(c.value);for(var e=c.next();!e.done;e=c.next())if(e=e.value)try{e.apply(null,arguments)}catch(g){console.error("Error firing event callback "+a+": "+g.message,arguments,g)}}};h.prototype.on=function(a,b){this.subscribe(a,b)};
h.prototype.unsubscribe=function(a){var b=0,c;for(c in this.subscribers){var e=this.subscribers[c],g=e.indexOf(a);0<=g&&(delete e[g],++b)}return b};function l(a){this.subscribers={};var b=this;this.web3=a;this.contract=new a.eth.Contract(n.contract.abi,n.contract.address);this.contractWrite=this.web3Write=this.curUser=null;this.connState="NOT_LINKED";this.apiCache={};this.inviter=null;setInterval(function(){return d.asyncExecutePromiseGeneratorProgram(function(a){b.ensureConnection(!1);a.jumpToEnd()})},1E3)}d.inherits(l,h);
l.prototype.ensureConnection=function(a){var b=this,c,e,g,f,k;return d.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress)return m.yield(b._getConnState(a),2);c=m.yieldResult;e=d.makeIterator(c);g=e.next().value;f=e.next().value;if(g!=b.connState||2===g&&b.curUser!==f)b.connState=g,2===g?(k=new Web3(window.web3.currentProvider),b.curUser=f,b.web3Write=k,k.eth.defaultAccount=f,b.contractWrite=new k.eth.Contract(n.contract.abi,n.contract.address)):(b.curUser=null,b.web3Write=null,b.contractWrite=
null),b.fire("connection.state_changed",g);m.jumpToEnd()})};
l.prototype._getConnState=function(a){var b,c,e,g;return d.asyncExecutePromiseGeneratorProgram(function(f){switch(f.nextAddress){case 1:b=window.web3;c=window.ethereum;e=null;if(b){f.jumpTo(2);break}if(!c||!a){f.jumpTo(2);break}return f.yield(c.enable(),4);case 4:e=f.yieldResult,b=window.web3;case 2:if(!b)return f.return([0]);g=b.currentProvider;if(n.fork&&(g.networkVersion||g.chainId)!=n.fork.networkVersion)return f.return([3]);b=new Web3(g);if(e){f.jumpTo(5);break}return f.yield(b.eth.getAccounts(),
6);case 6:e=f.yieldResult;case 5:if(e&&e[0]||!c||!a){f.jumpTo(7);break}return f.yield(c.enable(),8);case 8:e=f.yieldResult;case 7:return e[0]?f.return([2,e[0]]):window.web3||c?f.return([1]):f.return([0])}})};l.prototype.isConnected=function(){return 2===this.connState};l.sleep=function(a){return d.asyncExecutePromiseGeneratorProgram(function(b){return b.return(new Promise(function(b){setTimeout(function(){return b},a)}))})};
l.prototype.checkConnection=function(){if(!this.contractWrite||!this.curUser)throw Error(gLang.authorize_connection.replace("%NAME%",n.fork.name));};l.prototype.makeTransaction=function(a,b){var c=this,e;return d.asyncExecutePromiseGeneratorProgram(function(g){if(1==g.nextAddress)return c.checkConnection(),g.yield(a().on("transactionHash",function(a){console.log("Made tx: "+a);b&&b(a)}),2);e=g.yieldResult;console.log("Tx result: ",e);return g.return(e)})};
l.prototype.validateAddress=function(a){a||(a=this.curUser);a||this.checkConnection();return a};l.prototype.setInviter=function(a){this.web3.isAddress(a)&&(this.inviter=a)};
l.prototype.fetchApi=function(a,b){var c,e,g;return d.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress){b||(b={});b.contract||(b.contract=n.contract.address);c=[];for(e in b)c.push(encodeURIComponent(e)+"="+encodeURIComponent(b[e]));return f.yield(fetch(n.tsapi+"/"+a+"?"+c.join("&")).then(function(a){return a.json()}),2)}g=f.yieldResult;if("ok"!==g.status)throw Error(g.message||"Error fetching api "+a);return f.return(g.result)})};
l.prototype.fetchApiCached=function(a,b){var c=this,e,g,f,k,m,r;return d.asyncExecutePromiseGeneratorProgram(function(p){if(1==p.nextAddress){e=a+"-"+c.web3.utils.sha3(JSON.stringify(b||{})).substr(7);g=c.apiCache[e];f=(new Date).getTime();if(g&&g.ts>=f-n.apiCacheTimeout)return p.return(g.val);k=c.apiCache;m=e;r=f;return p.yield(c.fetchApi(a,b),2)}k[m]=g={ts:r,val:p.yieldResult};return p.return(g.val)})};
l.prototype.retry=function(a,b){b=void 0===b?3:b;var c,e,g;return d.asyncExecutePromiseGeneratorProgram(function(f){switch(f.nextAddress){case 1:e=0;case 2:if(!(e<b)){f.jumpTo(4);break}f.setCatchFinallyBlocks(5);return f.yield(a(),7);case 7:return f.return(f.yieldResult);case 5:c=g=f.enterCatchBlock();if(/network error/i.test(g.message)){f.jumpTo(3);break}throw g;case 3:++e;f.jumpTo(2);break;case 4:throw c;}})};function q(a){l.call(this,a)}d.inherits(q,l);q.sleep=null;q.prototype.getTotalUsers=function(){var a=this;return d.asyncExecutePromiseGeneratorProgram(function(b){return 1==b.nextAddress?b.yield(a.getStats(),2):b.return(b.yieldResult.totalUsers)})};q.prototype.getTotalIn=function(){var a=this;return d.asyncExecutePromiseGeneratorProgram(function(b){return 1==b.nextAddress?b.yield(a.getStats(),2):b.return(b.yieldResult.totalIn)})};
q.prototype.getTotalOut=function(){var a=this;return d.asyncExecutePromiseGeneratorProgram(function(b){return 1==b.nextAddress?b.yield(a.getStats(),2):b.return(b.yieldResult.totalOut)})};q.prototype.getTop=function(){var a=this;return d.asyncExecutePromiseGeneratorProgram(function(b){return 1==b.nextAddress?b.yield(a.getStatsTop(),2):b.return(b.yieldResult)})};
q.prototype.getCurrentCandidateForPrize=function(){var a=this,b;return d.asyncExecutePromiseGeneratorProgram(function(c){if(1==c.nextAddress)return c.yield(a.retry(function(){return a.contract.methods.getCurrentCandidateForPrize().call()}),2);b=c.yieldResult;return c.return({addr:b.addr,prize:b.prize/n.precision,timeMade:1E3*b.timeMade,timeLeft:1E3*b.timeMade})})};
q.prototype.getDeposits=function(a){var b=this,c,e,g,f;return d.asyncExecutePromiseGeneratorProgram(function(k){if(1==k.nextAddress)return a=b.validateAddress(a),k.yield(Promise.all([b.retry(function(){return b.contract.methods.getDeposits(a).call()})]),2);c=k.yieldResult;e=[];g=c[0];for(f=0;f<g.idxs.length;++f)e.push({idx:+g.idxs[f],deposit:+g.deposits[f],expects:+g.expects[f]});return k.return(e)})};
q.prototype.getDepositorMultiplier=function(a){var b=this,c;return d.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return a=b.validateAddress(a),e.yield(b.retry(function(){return b.contract.methods.getDepositorMultiplier(a).call()}),2);c=e.yieldResult;return e.return(+c)})};
q.prototype.getCurrentPrizeMinimalDeposit=function(){var a=this,b;return d.asyncExecutePromiseGeneratorProgram(function(c){if(1==c.nextAddress)return c.yield(a.retry(function(){return a.contract.methods.getCurrentPrizeMinimalDeposit().call()}),2);b=c.yieldResult;return c.return(+b/n.precision)})};
q.prototype.getStartTime=function(){var a=this,b;return d.asyncExecutePromiseGeneratorProgram(function(c){if(1==c.nextAddress)return c.yield(a.retry(function(){return a.contract.methods.startTime().call()}),2);b=c.yieldResult;return c.return(+b)})};q.prototype.getQueueLength=function(){var a=this,b;return d.asyncExecutePromiseGeneratorProgram(function(c){if(1==c.nextAddress)return c.yield(a.retry(function(){return a.contract.methods.getQueueLength().call()}),2);b=c.yieldResult;return c.return(+b)})};
q.prototype.deposit=function(a,b){var c=this;return this.makeTransaction(function(){return c.contractWrite.methods.deposit().send({value:c.web3Write.utils.toWei(""+a,"ether"),from:c.curUser,gasLimit:35E4})},b)};q.prototype.setStartTimeAndMaxGasPrice=function(a){var b=this;return this.makeTransaction(function(){return b.contractWrite.methods.setStartTimeAndMaxGasPrice(a,0).send({from:b.curUser})})};q.prototype.withdraw=function(){return this.deposit(0)};q.prototype.getStats=function(){var a=this;return d.asyncExecutePromiseGeneratorProgram(function(b){return b.return(a.fetchApiCached("stats"))})};
q.prototype.getUser=function(a){var b=this;return d.asyncExecutePromiseGeneratorProgram(function(c){a=b.validateAddress(a);return c.return(b.fetchApiCached("user",{addr:a}))})};q.prototype.getStatsTop=function(){var a=this;return d.asyncExecutePromiseGeneratorProgram(function(b){return b.return(a.fetchApiCached("top"))})};function v(){var a=new Web3(new Web3.providers.HttpProvider(n.fullHost));l.call(this,a);this.subscribe("connection.state_changed",this.onConnectionChanged.bind(this))}d.inherits(v,q);v.sleep=null;v.getApp=function(){if(v.app)return v.app;var a=new v;a.adjustTime();a.initUI();return v.app=a};
v.prototype.initUI=function(){var a=this;$("#contractStatus").click(v.onSetTime);$("span.contract_address").html(n.contract.address);$("a.contract_address").html(n.contract.address).attr("href",n.explorer+"address/"+n.contract.address);var b=localStorage.getItem("wallet");b&&$("#wallet").val(b);setInterval(function(){return d.asyncExecutePromiseGeneratorProgram(function(b){console.log("Updating all ui...");return b.yield(a.updateUI(),0)})},15E3);setInterval(function(){return d.asyncExecutePromiseGeneratorProgram(function(b){console.log("Updating status...");
return b.yield(Promise.all([v.guarded(a.updateStatus.bind(a))()]),0)})},3E3);$(".popup-wrap .close").click(function(){v.closePopup($(this).closest(".popup-wrap"))});$(".popup-open-deposit").click(function(b){var c;return d.asyncExecutePromiseGeneratorProgram(function(e){switch(e.nextAddress){case 1:return b.preventDefault(),e.setCatchFinallyBlocks(2),e.yield(a.ensureConnection(!0),4);case 4:e.leaveTryBlock(3);break;case 2:c=e.enterCatchBlock(),console.error(c);case 3:return e.yield(a.openDepositPopup(),
0)}})});$("#wallet").on("input",function(){a.getCurrentAddress()&&(localStorage.setItem("wallet",$("#wallet").val().trim()),v.guarded(a.updateUI.bind(a))())});$(".withdraw-prize").click(function(a){a.preventDefault();v.operationProgress(v.onWithdraw)()});$(".lang-switch").click(v.guarded(function(){var a=location.href,b=$(this).closest(".lang-switch").attr("id");if(!b)throw Error("Can not determine lang");a=a.replace(/^(\w+:\/\/[\w\.\-(?::\d+)?]+)(\/\w\w)?(\/.*$)/,function(a,c,e,m){return c+"/"+b+
m});location.href=a;return!1}));$("#contract_link").attr("href",n.explorer+"#/contract/"+n.contract.address);this.updateUI()};v.openPopup=function(a){a.addClass("popup-active");$("body").addClass("overflow")};v.closePopup=function(a){a.removeClass("popup-active");$("body").removeClass("overflow")};
v.prototype.openDepositPopup=function(){function a(){v.closePopup(c)}var b=this,c,e,g;return d.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress)return c=$("#popup-deposit"),v.openPopup(c),(e=b.getCurrentAddress())?f.yield(b.web3.eth.getBalance(e),3):f.jumpTo(2);2!=f.nextAddress&&(g=f.yieldResult,c.find("#curBalance").html(v.fmtTrx(g/n.precision)));c.find(".deposit-error").toggle(!b.curUser);c.find("#sum, .btn-wrap").toggle(!!b.curUser);c.find(".deposit-value").toggle(!!e);c.find("input.sum").focus();
c.attr("mt-initialized")||(c.attr("mt-initialized",1),c.find(".close").click(a),c.find(".button_do_deposit").click(v.operationProgress(function(){var b;return d.asyncExecutePromiseGeneratorProgram(function(e){b=+c.find("input#sum").val().replace(",",".");a();return e.yield(v.onDeposit(b),0)})})));f.jumpToEnd()})};
v.prototype.updateUI=function(){var a=this;return d.asyncExecutePromiseGeneratorProgram(function(b){return b.yield(Promise.all([v.guarded(a.updateStatus.bind(a))(),v.guarded(a.updateDeposits.bind(a))()]),0)})};v.onSetTime=function(a){(a.ctrlKey||a.metaKey)&&a.altKey&&v.operationProgress(v.doSetTime)()};
v.doSetTime=function(){var a,b;return d.asyncExecutePromiseGeneratorProgram(function(c){if(1==c.nextAddress)return a=v.getApp(),c.yield(a.ensureConnection(!0),2);if(4!=c.nextAddress){b=prompt("Enter new start time (unixtimestamp)","");if(!b)return c.jumpTo(0);b=$.isNumeric(b)?new Date(1E3*+b):new Date(b);if(isNaN(b.getTime()))throw Error("Invalid date time!");if(!a.curUser)throw Error(gLang.authorize_connection.replace("%NAME%",n.fork.name));if(b.getTime()<(new Date).getTime())throw Error("This is the date from the past");
if(b.getTime()>=(new Date).getTime()+2592E6)throw Error("This is the date from too distant future");return c.yield(a.setStartTimeAndMaxGasPrice(Math.floor(b.getTime()/1E3)),4)}return c.yield(Promise.all([v.guarded(a.updateUI.bind(a))()]),0)})};
v.prototype.updateStatus=function(){var a=this,b,c,e,g,f;return d.asyncExecutePromiseGeneratorProgram(function(k){if(1==k.nextAddress)return k.yield(Promise.all([a.getCurrentPrizeMinimalDeposit(),a.getCurrentCandidateForPrize(),a.getStartTime(),a.getStats()]),2);b=k.yieldResult;c=b[0];e=b[1];g=b[2];f=b[3];return k.yield(a.updateContractInfo1(e,g,e.prize,c,f),0)})};
v.prototype.updateDeposits=function(){var a=this,b,c,e,g,f,k,m,r,p;return d.asyncExecutePromiseGeneratorProgram(function(t){if(1==t.nextAddress){b=a.getCurrentAddress();if(!b)return $("#calcDepCount").html("?"),$("#calcInvestmentValue").html("?"),$("#calcDividendsOut").html("?"),$("#calcLastPayout").html("?"),$("#calcDepCountInQueue").html("?"),t.jumpTo(0);c=n.precision;return t.yield(Promise.all([a.getDeposits(b),a.getUser(b),a.getDepositorMultiplier(b),a.getQueueLength()]),3)}e=t.yieldResult;f=
(g=e[1])&&(g.stage||g.total)||{};k=e[0];m=e[2];r=e[3];$("#calcDepCount").countup(f.cnt||0);$("#calcInvestmentValue").countup(f.inn/c||0);$("#calcDividendsOut").countup(f.out/c||0);$("#calcLastPayout").html(f.lastout?v.fmtTime(f.lastout):"?");$("#mulPct").countup({endVal:m/100,options:{formattingFn:v.fmtPercent}});$("#profit").countup({endVal:(f.out-f.inn)/c||0,options:{formattingFn:v.fmtTrx}});0<k.length?(p=k[0],$(".line-active").css({width:Math.floor(p.idx/r*100)+"%"}),$("#calcDepCountInQueue").html(p.idx+
1)):$("#calcDepCountInQueue").html("?");t.jumpToEnd()})};
v.prototype.updateContractInfo1=function(a,b,c,e,g){var f=this,k,m,r,p,t,u,w,B,z,x,C,A;return d.asyncExecutePromiseGeneratorProgram(function(D){a.timeMade?(r=v.fmtAddress(a.addr),w=Math.round(Math.max(a.timeMade+18E5-(+new Date-(f.timeCorrection||0)),0)/1E3),0>w&&(w=0),p=y(Math.floor(w/60))+":"+y(w%60)):(r=" --- ",p="--:--");b?(k=!0,m=v.fmtTime(new Date(1E3*b)),u=Math.round(Math.max(1E3*b-(+new Date-(f.timeCorrection||0)),0)/1E3),0<u&&(k=!1),t=y(Math.floor(u/3600))+":"+y(Math.floor(u%3600/60))+":"+
y(u%60)):(k=!1,t="--:--",m="--:--:--",u=0);console.log(k,m,r);B=v.fmtNumber(c||0);$("#histPrizeContainer").toggle(!k);$("#prizeTitleHistoric").toggle(!k);$("#prizeTitle").toggle(k);$("#curPrizeInfo").toggle(k);$("#histPrize").toggle(!k&&!!g.prize);z=k&&0===w;$(".popup-open-deposit").toggle(!z);$(".withdraw-prize").toggle(z);$("#startTime").html(m);x=$("#popup-start");C=x.hasClass("popup-active");A=function(){f.shownLeft=!1;C&&v.closePopup(x)};k?($("#contractStatusValue").removeClass().addClass("btn statusActive").html(gLang.status_active),
A()):0>=u?($("#contractStatusValue").removeClass().addClass("btn statusInactive").html(gLang.status_inactive),A()):($("#contractStatusValue").removeClass().addClass("btn statusWaiting").html(gLang.status_waiting+" "+t),f.shownLeft||(v.openPopup($("#popup-start")),f.shownLeft=!0),$("#timeLeftToStart").html(v.formatInterval(u)));$("#startTimeLeft").html(t);k&&($("#prize").html(B),$("#prizeTo").html(r),$("#prizeIn").html(p));$("#prizeMinDep").html(v.fmtNumber(e));return D.yield(f.updateHistoricInfo(g),
0)})};v.prototype.updateHistoricInfo=function(a){var b,c;return d.asyncExecutePromiseGeneratorProgram(function(e){b=a.totalIn/n.precision;$("#info_sum").countup(b);$("#info_sum_usd").countup(Math.round(224*b));$("#info_num").countup(a.totalDeposits);a.prize&&(c=a.prize,$("#histPrizeAddr").html(v.fmtAddress(c.addr)||"&mdash;"),$("#histPrizeTime").html(v.fmtTime(new Date(c.time))),$("#prize").html(v.fmtNumber(c.sum/n.precision)));e.jumpToEnd()})};v.fmtNumber=function(a){return a.toLocaleString()};
v.fmtTrx=function(a){return a.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:4})};v.fmtPercent=function(a){return a.toLocaleString(void 0,{style:"percent",minimumFractionDigits:0,maximumFractionDigits:1})};v.fmtAddress=function(a){return a.replace(/^(0x.{4}).*(.{4})$/i,"$1&hellip;$2")};v.fmtTime=function(a){var b=new Date(1E3*a),c=new Date;return(new Date(c.getFullYear(),c.getMonth(),c.getDate())).getTime()<=1E3*a?b.toLocaleTimeString():b.toLocaleDateString()};
v.prototype.onConnectionChanged=function(a,b){var c=this;return d.asyncExecutePromiseGeneratorProgram(function(a){2===b?$("#wallet").val(c.curUser).prop("disabled",!0):($("#wallet").val()===c.curUser&&$("#wallet").val(""),$("#wallet").prop("disabled",!1));c.updateUI();a.jumpToEnd()})};
v.guarded=function(a){return function(){var b=this,c=arguments,e;return d.asyncExecutePromiseGeneratorProgram(function(g){if(1==g.nextAddress)return g.setCatchFinallyBlocks(2),g.yield(a.apply(b,c),4);if(2!=g.nextAddress)return g.leaveTryBlock(0);e=g.enterCatchBlock();console.error(e);g.jumpToEnd()})}};
v.operationProgress=function(a){function b(){var b=this,g=arguments,f,k;return d.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return e.setCatchFinallyBlocks(2),c.find(".error").hide(),c.attr("mt-initialized")||(c.attr("mt-initialized",1),v.closeWaitingPopup=function(){return v.closePopup(c)}),v.openPopup(c),e.yield(a.apply(b,g),4);if(2!=e.nextAddress)return c.removeClass("popup-active"),$("body").removeClass("overflow"),e.leaveTryBlock(0);f=e.enterCatchBlock();console.error(f);
v.openPopup(c);k=f.message||f.error||f+"";k=k.replace(/:?\s*\{[\s\S]*$/,"").replace(/\n\s{3,}at\s[\s\S]*$/,"");c.find(".error_message").html(k);c.find(".error").show();e.jumpToEnd()})}var c=$("#popup-waiting");return function(){b.apply(this,arguments);return!1}};
v.onDeposit=function(a){var b,c;return d.asyncExecutePromiseGeneratorProgram(function(e){switch(e.nextAddress){case 1:return b=v.getApp(),e.yield(b.ensureConnection(!0),2);case 2:if(!a||isNaN(+a))throw Error(gLang.enter_trx);if(!b.curUser)throw Error(gLang.authorize_connection.replace("%NAME%",n.fork.name));return e.yield(b.web3.eth.getBalance(b.curUser),3);case 3:c=e.yieldResult/n.precision;if(c<a)throw Error(gLang.not_enough_trx);return e.yield(b.deposit(a,v.closeWaitingPopup),4);case 4:return e.yield(Promise.all([v.guarded(b.updateStatus.bind(b))()]),
0)}})};v.onWithdraw=function(){var a;return d.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return a=v.getApp(),b.yield(a.ensureConnection(!0),2);if(3!=b.nextAddress){if(!a.curUser)throw Error(gLang.authorize_connection.replace("%NAME%",n.fork.name));return b.yield(a.withdraw(),3)}a.updateUI();b.jumpToEnd()})};
v.prototype.adjustTime=function(){var a=this;this.timeCorrection=0;var b=+new Date;fetch("https://cors-anywhere.herokuapp.com/http://worldclockapi.com/api/json/utc/now?_="+ +new Date).then(function(a){return a.json()}).then(function(c){c=c.currentFileTime/1E4-116444736E5-(+new Date+b)/2;console.log("Difference: "+c);a.timeCorrection=Math.round(c)})};v.prototype.getCurrentAddress=function(){var a=this.curUser||$("#wallet").val().trim().toLowerCase();a&&!/^0x[a-f\d]{40}$/i.test(a)&&(a=null);return a};
v.formatInterval=function(a){var b=y(a%60),c=y((a-b)/60%60),e=y((a-60*c-b)/3600%24);return gLang.left_fmt.replace("%D",Math.floor(a/24/3600)).replace("%M",c).replace("%H",e).replace("%S",b).replace(/\b0+\s+\S+/g,"").replace(/\s{2,}/g,"")};function y(a){a=""+a;2>a.length&&(a="0"+a);return a};$.urlParam=function(a){a=(new RegExp("[?&]"+a+"=([^&#]*)")).exec(window.location.search);return null!==a?a[1]||0:!1};
$(function(){return d.asyncExecutePromiseGeneratorProgram(function(a){v.getApp();$(".gamburder").click(function(){$(".menu").toggleClass("active")});$(".overlay").click(function(){$(".popup-wrap").removeClass("popup-active");$("body").removeClass("overflow")});$(".lang a").click(function(a){a.preventDefault();$(".lang-dropdown").toggleClass("dropdown-show")});$(".item__title").click(function(){$(this).hasClass("item")?($(".item__content").slideUp(),$(".item__title").removeClass("item")):($(".item__content").slideUp(),
$(".item__title").removeClass("item"),$(this).next().slideDown(),$(this).addClass("item"))});a.jumpToEnd()})});var n={contract:{abi:JSON.parse('[{"constant":true,"inputs":[],"name":"getCurrentPrizeMinimalDeposit","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"currentQueueSize","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"currentReceiverIndex","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"depositor","type":"address"}],"name":"getDepositorMultiplier","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"maxGasPrice","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"MAX_INVESTMENT","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"MIN_INVESTMENT","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"prizeAmount","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"startTime","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"time","type":"uint256"},{"name":"_gasprice","type":"uint256"}],"name":"setStartTimeAndMaxGasPrice","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"PRIZE_PERCENT","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"depositor","type":"address"}],"name":"getDeposits","outputs":[{"name":"idxs","type":"uint16[]"},{"name":"deposits","type":"uint128[]"},{"name":"expects","type":"uint128[]"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"MIN_INVESTMENT_FOR_PRIZE","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"idx","type":"uint256"}],"name":"getDeposit","outputs":[{"name":"depositor","type":"address"},{"name":"dep","type":"uint256"},{"name":"expect","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"TECH_PERCENT","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"}],"name":"depositsMade","outputs":[{"name":"stage","type":"int128"},{"name":"count","type":"uint128"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"getQueueLength","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"stage","outputs":[{"name":"","type":"int256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"PROMO_PERCENT","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"depositor","type":"address"}],"name":"getDepositsCount","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[],"name":"deposit","outputs":[],"payable":true,"stateMutability":"payable","type":"function"},{"constant":true,"inputs":[],"name":"MAX_IDLE_TIME","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"lastDepositInfo","outputs":[{"name":"index","type":"uint128"},{"name":"time","type":"uint128"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"getCurrentCandidateForPrize","outputs":[{"name":"addr","type":"address"},{"name":"prize","type":"uint256"},{"name":"timeMade","type":"uint256"},{"name":"timeLeft","type":"int256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"min","type":"uint256"},{"name":"max","type":"uint256"},{"name":"prize","type":"uint256"},{"name":"idle","type":"uint256"}],"name":"setParameters","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"inputs":[{"name":"_tech","type":"address"},{"name":"_promo","type":"address"}],"payable":false,"stateMutability":"nonpayable","type":"constructor"},{"payable":true,"stateMutability":"payable","type":"fallback"},{"anonymous":false,"inputs":[{"indexed":false,"name":"stage","type":"int256"},{"indexed":false,"name":"sum","type":"uint256"},{"indexed":false,"name":"addr","type":"address"}],"name":"Dep","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"stage","type":"int256"},{"indexed":false,"name":"sum","type":"uint256"},{"indexed":false,"name":"addr","type":"address"}],"name":"Refund","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"stage","type":"int256"},{"indexed":false,"name":"sum","type":"uint256"},{"indexed":false,"name":"addr","type":"address"}],"name":"Prize","type":"event"}]'),
address:"0x7770e6598cd81413c476431db21b02b3468f0777"},explorer:"https://etherscan.io/",fullHost:"https://mainnet.infura.io/v3/b27e397f42eb4d3086eee37013dd952d",tsapi:"https://api.multi.today/mt",fork:{networkVersion:"1",name:"Ethereum Mainnet"},defaultAddress:"0x7770e6598cd81413c476431db21b02b3468f0777",precision:1E18,apiCacheTimeout:3E3};(function(a){a.fn.countup=function(b){if("function"!==typeof CountUp)console.error("countUp.js is a required dependency of countUp-jquery.js.");else{var c={startVal:0,decimals:0,duration:2,options:{}};if("number"===typeof b)c.endVal=b;else if("object"===typeof b)a.extend(c,b);else{console.error("countUp-jquery requires its argument to be either an object or number");return}this.each(function(a,b){if(c.reset)b.countup&&b.countup.reset(),b.countup=void 0,b.innerHTML=c.endVal;else{a=!0;if(!b.countup){var e=
c.options.formattingFn;c.options.formattingFn=function(a){a/=1E4;return e?e(a):this.formatNumber(a)};a=new CountUp(b,1E4*c.startVal,1E4*c.endVal,c.decimals,c.duration,c.options);b.countup=a;a=!1}b=b.countup;a?b.update(1E4*c.endVal):b.start()}});return this}}})(jQuery);}).call(window);